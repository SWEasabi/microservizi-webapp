<!doctype html>
<html class="no-js" lang="">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="x-ua-compatible" content="ie=edge">
        <title>Sweasabi Project - Webapp Documentation</title>
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">

        <link rel="icon" type="image/x-icon" href="../images/favicon.ico">
	   <link rel="stylesheet" href="../styles/style.css">
        <link rel="stylesheet" href="../styles/dark.css">
    </head>
    <body>

        <div class="navbar navbar-default navbar-fixed-top d-block d-sm-none">
            <a href="../" class="navbar-brand">Sweasabi Project - Webapp Documentation</a>
            <button type="button" class="btn btn-default btn-menu ion-ios-menu" id="btn-menu"></button>
        </div>

        <div class="xs-menu menu" id="mobile-menu">
                <div id="book-search-input" role="search"><input type="text" placeholder="Type to search"></div>            <compodoc-menu></compodoc-menu>
        </div>

        <div class="container-fluid main">
           <div class="row main">
               <div class="hidden-xs menu">
                   <compodoc-menu mode="normal"></compodoc-menu>
               </div>
               <!-- START CONTENT -->
               <div class="content injectable">
                   <div class="content-data">








<ol class="breadcrumb">
  <li class="breadcrumb-item">Injectables</li>
  <li class="breadcrumb-item" >AppService</li>
</ol>

<ul class="nav nav-tabs" role="tablist">
        <li class="nav-item">
            <a href="#info" 
                class="nav-link"
                class="nav-link active"
                role="tab" id="info-tab" data-bs-toggle="tab" data-link="info">Info</a>
        </li>
        <li class="nav-item">
            <a href="#source" 
                class="nav-link"
                
                role="tab" id="source-tab" data-bs-toggle="tab" data-link="source">Source</a>
        </li>
</ul>

<div class="tab-content">
    <div class="tab-pane fade active in" id="info">
        <p class="comment">
            <h3>File</h3>
        </p>
        <p class="comment">
            <code>src/app/services/app.service.ts</code>
        </p>


            <p class="comment">
                <h3>Description</h3>
            </p>
            <p class="comment">
                <p>The main service for managing application state.
Handles operations related to lamps, sensors, and areas, including
loading data from the API, managing errors, and updating state.</p>

            </p>



            <section data-compodoc="block-index">
    <h3 id="index">Index</h3>
    <table class="table table-sm table-bordered index-table">
        <tbody>
                <tr>
                    <td class="col-md-4">
                        <h6><b>Properties</b></h6>
                    </td>
                </tr>
                <tr>
                    <td class="col-md-4">
                        <ul class="index-list">
                            <li>
                                <a href="#$store" >$store</a>
                            </li>
                            <li>
                                <a href="#api" >api</a>
                            </li>
                            <li>
                                    <span class="modifier">Readonly</span>
                                <a href="#areas$" >areas$</a>
                            </li>
                            <li>
                                    <span class="modifier">Readonly</span>
                                <a href="#error$" >error$</a>
                            </li>
                            <li>
                                    <span class="modifier">Readonly</span>
                                <a href="#firstLoad$" >firstLoad$</a>
                            </li>
                            <li>
                                    <span class="modifier">Readonly</span>
                                <a href="#lamps$" >lamps$</a>
                            </li>
                            <li>
                                    <span class="modifier">Readonly</span>
                                <a href="#loading$" >loading$</a>
                            </li>
                            <li>
                                    <span class="modifier">Readonly</span>
                                <a href="#sensors$" >sensors$</a>
                            </li>
                        </ul>
                    </td>
                </tr>

                <tr>
                    <td class="col-md-4">
                        <h6><b>Methods</b></h6>
                    </td>
                </tr>
                <tr>
                    <td class="col-md-4">
                        <ul class="index-list">
                            <li>
                                    <span class="modifier">Public</span>
                                <a href="#addArea$" >addArea$</a>
                            </li>
                            <li>
                                    <span class="modifier">Public</span>
                                <a href="#addLamp$" >addLamp$</a>
                            </li>
                            <li>
                                    <span class="modifier">Public</span>
                                <a href="#addSensor$" >addSensor$</a>
                            </li>
                            <li>
                                    <span class="modifier">Public</span>
                                <a href="#loadData" >loadData</a>
                            </li>
                            <li>
                                    <span class="modifier">Public</span>
                                <a href="#loadDataAreas" >loadDataAreas</a>
                            </li>
                            <li>
                                    <span class="modifier">Public</span>
                                <a href="#loadDataSensors" >loadDataSensors</a>
                            </li>
                            <li>
                                    <span class="modifier">Private</span>
                                <a href="#manageError" >manageError</a>
                            </li>
                            <li>
                                    <span class="modifier">Private</span>
                                <a href="#setLampPending" >setLampPending</a>
                            </li>
                            <li>
                                    <span class="modifier">Private</span>
                                <a href="#startLoading" >startLoading</a>
                            </li>
                            <li>
                                    <span class="modifier">Private</span>
                                <a href="#stopLoading" >stopLoading</a>
                            </li>
                            <li>
                                    <span class="modifier">Public</span>
                                <a href="#toggleLamp" >toggleLamp</a>
                            </li>
                            <li>
                                    <span class="modifier">Public</span>
                                <a href="#toggleSensor" >toggleSensor</a>
                            </li>
                        </ul>
                    </td>
                </tr>





        </tbody>
    </table>
</section>


            <section data-compodoc="block-methods">
    
    <h3 id="methods">
        Methods
    </h3>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="addArea$"></a>
                    <span class="name">
                        <span class="modifier">Public</span>
                        <span ><b>addArea$</b></span>
                        <a href="#addArea$"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                    <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>addArea$(alias: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank">string</a>)</code>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-line">Defined in <a href="" data-line="286"
                            class="link-to-prism">src/app/services/app.service.ts:286</a></div>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-description"><p>Add a new area with the provided alias.
Start the loading spinner, call the API to add the area,
then stop the loading spinner and reload the area data.</p>
</div>

                    <div class="io-description">
                        <b>Parameters :</b>
                        
                        <table class="params">
                            <thead>
                                <tr>
                                    <td>Name</td>
                                    <td>Type</td>
                                    <td>Optional</td>
                                    <td>Description</td>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>alias</td>
                                    <td>
                                                <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank" >string</a></code>
                                    </td>

                                    <td>
                                        No
                                    </td>


                                    <td>
                                        <p>The alias of the new area.</p>

                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                    <div>
                    </div>
                    <div class="io-description">
                        <b>Returns : </b>    <code>Observable&lt;boolean&gt;</code>

                    </div>
                    <div class="io-description">
                        <p>An observable that emits a boolean value indicating whether the area addition was successful.</p>

                    </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="addLamp$"></a>
                    <span class="name">
                        <span class="modifier">Public</span>
                        <span ><b>addLamp$</b></span>
                        <a href="#addLamp$"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                    <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>addLamp$(alias: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank">string</a>)</code>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-line">Defined in <a href="" data-line="249"
                            class="link-to-prism">src/app/services/app.service.ts:249</a></div>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-description"><p>Add a new lamp with the provided alias.
Start the loading spinner, call the API to add the lamp,
then stop the loading spinner and reload the lamp data.</p>
</div>

                    <div class="io-description">
                        <b>Parameters :</b>
                        
                        <table class="params">
                            <thead>
                                <tr>
                                    <td>Name</td>
                                    <td>Type</td>
                                    <td>Optional</td>
                                    <td>Description</td>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>alias</td>
                                    <td>
                                                <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank" >string</a></code>
                                    </td>

                                    <td>
                                        No
                                    </td>


                                    <td>
                                        <p>The alias of the new lamp.</p>

                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                    <div>
                    </div>
                    <div class="io-description">
                        <b>Returns : </b>    <code>Observable&lt;boolean&gt;</code>

                    </div>
                    <div class="io-description">
                        <p>An observable that emits a boolean value indicating whether the lamp addition was successful.</p>

                    </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="addSensor$"></a>
                    <span class="name">
                        <span class="modifier">Public</span>
                        <span ><b>addSensor$</b></span>
                        <a href="#addSensor$"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                    <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>addSensor$(alias: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank">string</a>, geoPos: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank">string</a>, actionRange: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank">string</a>)</code>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-line">Defined in <a href="" data-line="269"
                            class="link-to-prism">src/app/services/app.service.ts:269</a></div>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-description"><p>Add a new sensor with the provided alias, geo position, and action range.
Start the loading spinner, call the API to add the sensor,
then stop the loading spinner and reload the sensor data.</p>
</div>

                    <div class="io-description">
                        <b>Parameters :</b>
                        
                        <table class="params">
                            <thead>
                                <tr>
                                    <td>Name</td>
                                    <td>Type</td>
                                    <td>Optional</td>
                                    <td>Description</td>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>alias</td>
                                    <td>
                                                <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank" >string</a></code>
                                    </td>

                                    <td>
                                        No
                                    </td>


                                    <td>
                                        <p>The alias of the new sensor.</p>

                                    </td>
                                </tr>
                                <tr>
                                    <td>geoPos</td>
                                    <td>
                                                <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank" >string</a></code>
                                    </td>

                                    <td>
                                        No
                                    </td>


                                    <td>
                                        <p>The geographic position of the new sensor.</p>

                                    </td>
                                </tr>
                                <tr>
                                    <td>actionRange</td>
                                    <td>
                                                <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank" >string</a></code>
                                    </td>

                                    <td>
                                        No
                                    </td>


                                    <td>
                                        <p>The action range of the new sensor.</p>

                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                    <div>
                    </div>
                    <div class="io-description">
                        <b>Returns : </b>    <code>Observable&lt;boolean&gt;</code>

                    </div>
                    <div class="io-description">
                        <p>An observable that emits a boolean value indicating whether the sensor addition was successful.</p>

                    </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="loadData"></a>
                    <span class="name">
                        <span class="modifier">Public</span>
                        <span ><b>loadData</b></span>
                        <a href="#loadData"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                    <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>loadData()</code>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-line">Defined in <a href="" data-line="99"
                            class="link-to-prism">src/app/services/app.service.ts:99</a></div>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-description"><p>Load lamp data from the API.
Update the state with the new data, manage any errors,
and stop the loading spinner when complete.</p>
</div>

                    <div class="io-description">
                        <b>Returns : </b>        <code><a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank" >void</a></code>

                    </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="loadDataAreas"></a>
                    <span class="name">
                        <span class="modifier">Public</span>
                        <span ><b>loadDataAreas</b></span>
                        <a href="#loadDataAreas"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                    <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>loadDataAreas()</code>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-line">Defined in <a href="" data-line="149"
                            class="link-to-prism">src/app/services/app.service.ts:149</a></div>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-description"><p>Load area data from the API.
Update the state with the new data, manage any errors,
and stop the loading spinner when complete.</p>
</div>

                    <div class="io-description">
                        <b>Returns : </b>        <code><a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank" >void</a></code>

                    </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="loadDataSensors"></a>
                    <span class="name">
                        <span class="modifier">Public</span>
                        <span ><b>loadDataSensors</b></span>
                        <a href="#loadDataSensors"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                    <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>loadDataSensors()</code>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-line">Defined in <a href="" data-line="124"
                            class="link-to-prism">src/app/services/app.service.ts:124</a></div>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-description"><p>Load sensor data from the API.
Update the state with the new data, manage any errors,
and stop the loading spinner when complete.</p>
</div>

                    <div class="io-description">
                        <b>Returns : </b>        <code><a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank" >void</a></code>

                    </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="manageError"></a>
                    <span class="name">
                        <span class="modifier">Private</span>
                        <span ><b>manageError</b></span>
                        <a href="#manageError"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                    <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>manageError(error: <a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank">any</a>)</code>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-line">Defined in <a href="" data-line="229"
                            class="link-to-prism">src/app/services/app.service.ts:229</a></div>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-description"><p>Manage errors.
Update the state with an appropriate error message based on the HTTP status code.</p>
</div>

                    <div class="io-description">
                        <b>Parameters :</b>
                        
                        <table class="params">
                            <thead>
                                <tr>
                                    <td>Name</td>
                                    <td>Type</td>
                                    <td>Optional</td>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>error</td>
                                    <td>
                                                <code><a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank" >any</a></code>
                                    </td>

                                    <td>
                                        No
                                    </td>


                                </tr>
                            </tbody>
                        </table>
                    </div>
                    <div>
                    </div>
                    <div class="io-description">
                        <b>Returns : </b>        <code><a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank" >void</a></code>

                    </div>
                    <div class="io-description">
                        
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="setLampPending"></a>
                    <span class="name">
                        <span class="modifier">Private</span>
                        <span ><b>setLampPending</b></span>
                        <a href="#setLampPending"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                    <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>setLampPending(lamp: <a href="../interfaces/LampStatus.html" target="_self">LampStatus</a>, pending: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/boolean" target="_blank">boolean</a>)</code>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-line">Defined in <a href="" data-line="193"
                            class="link-to-prism">src/app/services/app.service.ts:193</a></div>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-description"><p>Update a lamp&#39;s pending status.
This is used to show that a lamp&#39;s status is being changed.</p>
</div>

                    <div class="io-description">
                        <b>Parameters :</b>
                        
                        <table class="params">
                            <thead>
                                <tr>
                                    <td>Name</td>
                                    <td>Type</td>
                                    <td>Optional</td>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>lamp</td>
                                    <td>
                                                <code><a href="../interfaces/LampStatus.html" target="_self" >LampStatus</a></code>
                                    </td>

                                    <td>
                                        No
                                    </td>


                                </tr>
                                <tr>
                                    <td>pending</td>
                                    <td>
                                                <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/boolean" target="_blank" >boolean</a></code>
                                    </td>

                                    <td>
                                        No
                                    </td>


                                </tr>
                            </tbody>
                        </table>
                    </div>
                    <div>
                    </div>
                    <div class="io-description">
                        <b>Returns : </b>        <code><a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank" >void</a></code>

                    </div>
                    <div class="io-description">
                        
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="startLoading"></a>
                    <span class="name">
                        <span class="modifier">Private</span>
                        <span ><b>startLoading</b></span>
                        <a href="#startLoading"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                    <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>startLoading()</code>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-line">Defined in <a href="" data-line="174"
                            class="link-to-prism">src/app/services/app.service.ts:174</a></div>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-description"><p>Start the loading spinner.</p>
</div>

                    <div class="io-description">
                        <b>Returns : </b>        <code><a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank" >void</a></code>

                    </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="stopLoading"></a>
                    <span class="name">
                        <span class="modifier">Private</span>
                        <span ><b>stopLoading</b></span>
                        <a href="#stopLoading"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                    <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>stopLoading()</code>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-line">Defined in <a href="" data-line="183"
                            class="link-to-prism">src/app/services/app.service.ts:183</a></div>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-description"><p>Stop the loading spinner.</p>
</div>

                    <div class="io-description">
                        <b>Returns : </b>        <code><a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank" >void</a></code>

                    </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="toggleLamp"></a>
                    <span class="name">
                        <span class="modifier">Public</span>
                        <span ><b>toggleLamp</b></span>
                        <a href="#toggleLamp"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                    <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>toggleLamp(lamp: <a href="../interfaces/LampStatus.html" target="_self">LampStatus</a>)</code>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-line">Defined in <a href="" data-line="204"
                            class="link-to-prism">src/app/services/app.service.ts:204</a></div>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-description"><p>Toggle a lamp&#39;s status.
Call the API to update the lamp&#39;s status,
then reload the lamp data to reflect the changes.</p>
</div>

                    <div class="io-description">
                        <b>Parameters :</b>
                        
                        <table class="params">
                            <thead>
                                <tr>
                                    <td>Name</td>
                                    <td>Type</td>
                                    <td>Optional</td>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>lamp</td>
                                    <td>
                                                <code><a href="../interfaces/LampStatus.html" target="_self" >LampStatus</a></code>
                                    </td>

                                    <td>
                                        No
                                    </td>


                                </tr>
                            </tbody>
                        </table>
                    </div>
                    <div>
                    </div>
                    <div class="io-description">
                        <b>Returns : </b>        <code><a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank" >void</a></code>

                    </div>
                    <div class="io-description">
                        
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="toggleSensor"></a>
                    <span class="name">
                        <span class="modifier">Public</span>
                        <span ><b>toggleSensor</b></span>
                        <a href="#toggleSensor"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                    <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>toggleSensor(sensor: <a href="../interfaces/SensorStatus.html" target="_self">SensorStatus</a>)</code>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-line">Defined in <a href="" data-line="216"
                            class="link-to-prism">src/app/services/app.service.ts:216</a></div>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-description"><p>Toggle a sensor&#39;s status.
Call the API to update the sensor&#39;s status,
then reload the sensor data to reflect the changes.</p>
</div>

                    <div class="io-description">
                        <b>Parameters :</b>
                        
                        <table class="params">
                            <thead>
                                <tr>
                                    <td>Name</td>
                                    <td>Type</td>
                                    <td>Optional</td>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>sensor</td>
                                    <td>
                                                <code><a href="../interfaces/SensorStatus.html" target="_self" >SensorStatus</a></code>
                                    </td>

                                    <td>
                                        No
                                    </td>


                                </tr>
                            </tbody>
                        </table>
                    </div>
                    <div>
                    </div>
                    <div class="io-description">
                        <b>Returns : </b>        <code><a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank" >void</a></code>

                    </div>
                    <div class="io-description">
                        
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
</section>
            <section data-compodoc="block-properties">
    
    <h3 id="inputs">
        Properties
    </h3>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="$store"></a>
                    <span class="name">
                        <span ><b>$store</b></span>
                        <a href="#$store"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Default value : </i><code>new BehaviorSubject&lt;Store&gt;(initialState)</code>
                    </td>
                </tr>
                    <tr>
                        <td class="col-md-4">
                                <div class="io-line">Defined in <a href="" data-line="83" class="link-to-prism">src/app/services/app.service.ts:83</a></div>
                        </td>
                    </tr>

            <tr>
                <td class="col-md-4">
                    <div class="io-description"><p>Define the application&#39;s main state store as a BehaviorSubject.
This is an RxJS Subject that can emit new values to its subscribers
and has the characteristic that it will always return the last value emitted to new subscribers.
Here it&#39;s initialized with an initial state.</p>
</div>
                </td>
            </tr>

        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="api"></a>
                    <span class="name">
                        <span ><b>api</b></span>
                        <a href="#api"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Default value : </i><code>inject(ApiService)</code>
                    </td>
                </tr>
                    <tr>
                        <td class="col-md-4">
                                <div class="io-line">Defined in <a href="" data-line="74" class="link-to-prism">src/app/services/app.service.ts:74</a></div>
                        </td>
                    </tr>

            <tr>
                <td class="col-md-4">
                    <div class="io-description"><p>Inject the ApiService.</p>
</div>
                </td>
            </tr>

        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="areas$"></a>
                    <span class="name">
                            <span class="modifier">Readonly</span>
                        <span ><b>areas$</b></span>
                        <a href="#areas$"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Default value : </i><code>this.$store.pipe(map(state &#x3D;&gt; state.areas))</code>
                    </td>
                </tr>
                    <tr>
                        <td class="col-md-4">
                                <div class="io-line">Defined in <a href="" data-line="89" class="link-to-prism">src/app/services/app.service.ts:89</a></div>
                        </td>
                    </tr>


        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="error$"></a>
                    <span class="name">
                            <span class="modifier">Readonly</span>
                        <span ><b>error$</b></span>
                        <a href="#error$"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Default value : </i><code>this.$store.pipe(map(state &#x3D;&gt; state.error))</code>
                    </td>
                </tr>
                    <tr>
                        <td class="col-md-4">
                                <div class="io-line">Defined in <a href="" data-line="90" class="link-to-prism">src/app/services/app.service.ts:90</a></div>
                        </td>
                    </tr>


        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="firstLoad$"></a>
                    <span class="name">
                            <span class="modifier">Readonly</span>
                        <span ><b>firstLoad$</b></span>
                        <a href="#firstLoad$"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Default value : </i><code>this.$store.pipe(map(state &#x3D;&gt; state.firstLoad))</code>
                    </td>
                </tr>
                    <tr>
                        <td class="col-md-4">
                                <div class="io-line">Defined in <a href="" data-line="92" class="link-to-prism">src/app/services/app.service.ts:92</a></div>
                        </td>
                    </tr>


        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="lamps$"></a>
                    <span class="name">
                            <span class="modifier">Readonly</span>
                        <span ><b>lamps$</b></span>
                        <a href="#lamps$"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Default value : </i><code>this.$store.pipe(map(state &#x3D;&gt; state.lamps))</code>
                    </td>
                </tr>
                    <tr>
                        <td class="col-md-4">
                                <div class="io-line">Defined in <a href="" data-line="87" class="link-to-prism">src/app/services/app.service.ts:87</a></div>
                        </td>
                    </tr>

            <tr>
                <td class="col-md-4">
                    <div class="io-description"><p>Define selectors for different pieces of state.</p>
</div>
                </td>
            </tr>

        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="loading$"></a>
                    <span class="name">
                            <span class="modifier">Readonly</span>
                        <span ><b>loading$</b></span>
                        <a href="#loading$"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Default value : </i><code>this.$store.pipe(map(state &#x3D;&gt; state.loading), delay(0))</code>
                    </td>
                </tr>
                    <tr>
                        <td class="col-md-4">
                                <div class="io-line">Defined in <a href="" data-line="91" class="link-to-prism">src/app/services/app.service.ts:91</a></div>
                        </td>
                    </tr>


        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="sensors$"></a>
                    <span class="name">
                            <span class="modifier">Readonly</span>
                        <span ><b>sensors$</b></span>
                        <a href="#sensors$"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Default value : </i><code>this.$store.pipe(map(state &#x3D;&gt; state.sensors))</code>
                    </td>
                </tr>
                    <tr>
                        <td class="col-md-4">
                                <div class="io-line">Defined in <a href="" data-line="88" class="link-to-prism">src/app/services/app.service.ts:88</a></div>
                        </td>
                    </tr>


        </tbody>
    </table>
</section>

    </div>


    <div class="tab-pane fade  tab-source-code" id="source">
        <pre class="line-numbers compodoc-sourcecode"><code class="language-typescript">import { HttpStatusCode } from &quot;@angular/common/http&quot;;
import { inject, Injectable } from &quot;@angular/core&quot;;
import { BehaviorSubject, catchError, delay, map, Observable, of, switchMap, tap } from &quot;rxjs&quot;;
import { LampStatus, SensorStatus, AreaStatus } from &quot;../model&quot;;
import { ApiService } from &quot;./api.service&quot;;

/**
 * Interface representing the application state store.
 * It contains arrays of lamps, sensors, and areas,
 * as well as loading and error flags.
 */
interface Store {
  /**
   * An array of lamp statuses representing the state of lamps in the application.
   */
  lamps: LampStatus[];
  /**
   * An array of sensor statuses representing the state of sensors in the application.
   */
  sensors: SensorStatus[];
  /**
   * An array of area statuses representing the state of areas in the application.
   */
  areas: AreaStatus[];
  /**
   * A flag indicating whether data is currently being loaded or fetched.
   */
  loading: boolean;
  /**
   * A flag indicating whether it is the first load of data.
   */
  firstLoad: boolean;
  /**
   * A string representing an error message in case of any errors.
   */
  error: string;
}


/**
 * Initial state for the application store.
 * Contains empty arrays for lamps, sensors, and areas,
 * and sets the loading and firstLoad flags to false.
 */
const initialState: Store &#x3D; {
  lamps: [],
  sensors: [],
  areas: [],
  loading: false,
  firstLoad: true,
  error: null
};

/**
 * The main service for managing application state.
 * Handles operations related to lamps, sensors, and areas, including
 * loading data from the API, managing errors, and updating state.
 */
@Injectable({
  providedIn: &quot;root&quot;
})

export class AppService {

  /**
   * Inject the ApiService.
   */
  api &#x3D; inject(ApiService);

  /**
   * Define the application&#x27;s main state store as a BehaviorSubject.
   * This is an RxJS Subject that can emit new values to its subscribers
   * and has the characteristic that it will always return the last value emitted to new subscribers.
   * Here it&#x27;s initialized with an initial state.
   */

  $store &#x3D; new BehaviorSubject&lt;Store&gt;(initialState);
  /**
     * Define selectors for different pieces of state.
     */
  readonly lamps$ &#x3D; this.$store.pipe(map(state &#x3D;&gt; state.lamps));
  readonly sensors$ &#x3D; this.$store.pipe(map(state &#x3D;&gt; state.sensors));
  readonly areas$ &#x3D; this.$store.pipe(map(state &#x3D;&gt; state.areas));
  readonly error$ &#x3D; this.$store.pipe(map(state &#x3D;&gt; state.error));
  readonly loading$ &#x3D; this.$store.pipe(map(state &#x3D;&gt; state.loading), delay(0));
  readonly firstLoad$ &#x3D; this.$store.pipe(map(state &#x3D;&gt; state.firstLoad));

  /**
   * Load lamp data from the API.
   * Update the state with the new data, manage any errors,
   * and stop the loading spinner when complete.
   */
  public loadData() {
    this.startLoading();
    this.api.getAllLamps$()
      .subscribe({
        next: (lamps) &#x3D;&gt; {
          this.$store.next({
            ...this.$store.value,
            lamps,
            firstLoad: false
          });
        },
        error: (error) &#x3D;&gt; {
          this.manageError(error);
          this.stopLoading();
        },
        complete: () &#x3D;&gt; {
          this.stopLoading();
        }
      });
  }
  /**
     * Load sensor data from the API.
     * Update the state with the new data, manage any errors,
     * and stop the loading spinner when complete.
     */
  public loadDataSensors() {
    this.startLoading();
    this.api.getAllSensors$()
      .subscribe({
        next: (sensors) &#x3D;&gt; {
          this.$store.next({
            ...this.$store.value,
            sensors,
            firstLoad: false
          });
        },
        error: (error) &#x3D;&gt; {
          this.manageError(error);
          this.stopLoading();
        },
        complete: () &#x3D;&gt; {
          this.stopLoading();
        }
      });
  }
  /**
     * Load area data from the API.
     * Update the state with the new data, manage any errors,
     * and stop the loading spinner when complete.
     */
  public loadDataAreas() {
    this.startLoading();
    this.api.getAllAreas$()
      .subscribe({
        next: (areas) &#x3D;&gt; {
          this.$store.next({
            ...this.$store.value,
            areas,
            firstLoad: false
          });
        },
        error: (error) &#x3D;&gt; {
          this.manageError(error);
          this.stopLoading();
        },
        complete: () &#x3D;&gt; {
          this.stopLoading();
        }
      });
  }


  /**
     * Start the loading spinner.
     */
  private startLoading() {
    this.$store.next({
      ...this.$store.value,
      loading: true
    });
  }
  /**
     * Stop the loading spinner.
     */
  private stopLoading() {
    this.$store.next({
      ...this.$store.value,
      loading: false
    });
  }
  /**
     * Update a lamp&#x27;s pending status.
     * This is used to show that a lamp&#x27;s status is being changed.
     */
  private setLampPending(lamp: LampStatus, pending: boolean) {
    this.$store.next({
      ...this.$store.value,
      lamps: this.$store.value.lamps.map(l &#x3D;&gt; l.id &#x3D;&#x3D;&#x3D; lamp.id ? { ...l, pending } : l)
    });
  }
  /**
     * Toggle a lamp&#x27;s status.
     * Call the API to update the lamp&#x27;s status,
     * then reload the lamp data to reflect the changes.
     */
  public toggleLamp(lamp: LampStatus) {
    this.setLampPending(lamp, true);
    this.api.toggleLamp$(lamp.id, lamp.status &#x3D;&#x3D;&#x3D; &quot;On&quot; ? &quot;Off&quot; : &quot;On&quot;)
      .subscribe({
        next: () &#x3D;&gt; this.loadData()
      });
  }
  /**
     * Toggle a sensor&#x27;s status.
     * Call the API to update the sensor&#x27;s status,
     * then reload the sensor data to reflect the changes.
     */
  public toggleSensor(sensor: SensorStatus) {
    this.setLampPending(sensor, true);
    this.api.toggleLamp$(sensor.id, sensor.status &#x3D;&#x3D;&#x3D; &quot;On&quot; ? &quot;Off&quot; : &quot;On&quot;)
      .subscribe({
        next: () &#x3D;&gt; this.loadData()
      });
  }

  /**
     * Manage errors.
     * Update the state with an appropriate error message based on the HTTP status code.
     */

  private manageError(error: any) {
    if (error.status &#x3D;&#x3D;&#x3D; HttpStatusCode.NotFound) {
      this.$store.next({
        ...this.$store.value,
        error: &quot;Not found&quot;
      });
    } else {
      this.$store.next({
        ...this.$store.value,
        error: &quot;Error&quot;
      });
    }
  }
  /**
  * Add a new lamp with the provided alias.
  * Start the loading spinner, call the API to add the lamp,
  * then stop the loading spinner and reload the lamp data.
  * @param alias The alias of the new lamp.
  * @returns An observable that emits a boolean value indicating whether the lamp addition was successful.
  */
  public addLamp$(alias: string): Observable&lt;boolean&gt; {
    return of(true)
      .pipe(
        tap(() &#x3D;&gt; this.startLoading()),
        switchMap(() &#x3D;&gt; this.api.addLamp$(alias)),
        map(() &#x3D;&gt; true),
        catchError(() &#x3D;&gt; of(false)),
        tap(() &#x3D;&gt; this.loadData())
      );
  }
  /**
   * Add a new sensor with the provided alias, geo position, and action range.
   * Start the loading spinner, call the API to add the sensor,
   * then stop the loading spinner and reload the sensor data.
   * @param alias The alias of the new sensor.
   * @param geoPos The geographic position of the new sensor.
   * @param actionRange The action range of the new sensor.
   * @returns An observable that emits a boolean value indicating whether the sensor addition was successful.
   */

  public addSensor$(alias: string, geoPos: string, actionRange: string): Observable&lt;boolean&gt; {
    return of(true)
      .pipe(
        tap(() &#x3D;&gt; this.startLoading()),
        switchMap(() &#x3D;&gt; this.api.addSensor$(alias, geoPos, actionRange)),
        map(() &#x3D;&gt; true),
        catchError(() &#x3D;&gt; of(false)),
        tap(() &#x3D;&gt; this.loadData())
      );
  }
  /**
 * Add a new area with the provided alias.
 * Start the loading spinner, call the API to add the area,
 * then stop the loading spinner and reload the area data.
 * @param alias The alias of the new area.
 * @returns An observable that emits a boolean value indicating whether the area addition was successful.
 */
  public addArea$(alias: string): Observable&lt;boolean&gt; {
    return of(true)
      .pipe(
        tap(() &#x3D;&gt; {
          this.startLoading()
        }),
        switchMap(() &#x3D;&gt; this.api.addArea$(alias)),
        map(() &#x3D;&gt; true),
        catchError(() &#x3D;&gt; of(false)),
        tap(() &#x3D;&gt; this.loadDataAreas())
      );
  }

}

</code></pre>
    </div>

</div>













                   </div><div class="search-results">
    <div class="has-results">
        <h1 class="search-results-title"><span class='search-results-count'></span> results matching "<span class='search-query'></span>"</h1>
        <ul class="search-results-list"></ul>
    </div>
    <div class="no-results">
        <h1 class="search-results-title">No results matching "<span class='search-query'></span>"</h1>
    </div>
</div>
</div>
               <!-- END CONTENT -->
           </div>
       </div>

          <label class="dark-mode-switch">
               <input type="checkbox">
               <span class="slider">
                    <svg class="slider-icon" viewBox="0 0 24 24" fill="none" height="20" stroke="#000" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" width="20" xmlns="http://www.w3.org/2000/svg">
                    <path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"></path>
                    </svg>
               </span>
          </label>

       <script>
            var COMPODOC_CURRENT_PAGE_DEPTH = 1;
            var COMPODOC_CURRENT_PAGE_CONTEXT = 'injectable';
            var COMPODOC_CURRENT_PAGE_URL = 'AppService.html';
            var MAX_SEARCH_RESULTS = 15;
       </script>

       <script src="../js/libs/custom-elements.min.js"></script>
       <script src="../js/libs/lit-html.js"></script>

       <script src="../js/menu-wc.js" defer></script>
       <script nomodule src="../js/menu-wc_es5.js" defer></script>

       <script src="../js/libs/bootstrap-native.js"></script>

       <script src="../js/libs/es6-shim.min.js"></script>
       <script src="../js/libs/EventDispatcher.js"></script>
       <script src="../js/libs/promise.min.js"></script>
       <script src="../js/libs/zepto.min.js"></script>

       <script src="../js/compodoc.js"></script>

       <script src="../js/tabs.js"></script>
       <script src="../js/menu.js"></script>
       <script src="../js/libs/clipboard.min.js"></script>
       <script src="../js/libs/prism.js"></script>
       <script src="../js/sourceCode.js"></script>
          <script src="../js/search/search.js"></script>
          <script src="../js/search/lunr.min.js"></script>
          <script src="../js/search/search-lunr.js"></script>
          <script src="../js/search/search_index.js"></script>
       <script src="../js/lazy-load-graphs.js"></script>


    </body>
</html>
